<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PharmaGuardian AI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #39b5a4;
            --dark: #0a192f;
            --text-gray: #8892b0;
            --white: #e6f1ff;
            --error: #ff4d4d;
            --success: #4ade80;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: var(--white); overflow: hidden; }

        /* Header & Brand */
        header {
            display: flex;
            align-items: center;
            padding: 20px 5%;
            position: absolute;
            width: 100%;
            z-index: 10;
        }
        .brand-container { display: flex; align-items: center; gap: 15px; }
        .logo-img { height: 60px; }
        .tagline-box h2 { font-size: 1.8rem; color: var(--primary); margin: 0; }
        .tagline-box p { font-size: 0.9rem; color: var(--text-gray); font-style: italic; }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            padding: 0 10%;
            background: linear-gradient(to right, rgba(10,25,47,0.95), transparent), url('79167.png');
            background-size: cover;
            background-position: center;
        }
        .hero-content h1 { font-size: 3.5rem; max-width: 600px; }

        /* Auth Overlay */
        #authOverlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .auth-card {
            background: #112240;
            padding: 30px;
            border-radius: 20px;
            width: 95%;
            max-width: 500px;
            border: 1px solid var(--primary);
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            position: relative;
        }

        .back-btn {
            position: absolute;
            top: 15px; left: 15px;
            color: var(--primary);
            cursor: pointer;
            font-size: 0.9rem;
        }

        .hidden { display: none !important; }
        
        input, select {
            width: 100%; padding: 12px; margin: 8px 0;
            background: #0a192f; border: 1px solid #233554;
            color: white; border-radius: 8px; outline: none;
        }

        .btn-row { display: flex; gap: 10px; margin-top: 15px; }
        button { 
            flex: 1; padding: 12px; border-radius: 10px; border: none; 
            cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .btn-main { background: var(--primary); color: white; }
        .btn-frozen { background: #233554; color: #555; cursor: not-allowed; }
        
        .error-msg { color: var(--error); font-size: 0.75rem; display: none; margin-bottom: 5px; }
        .verified-msg { color: var(--success); font-size: 0.75rem; display: none; margin-bottom: 5px; }

        .phone-input-container { position: relative; display: flex; align-items: center; }
        .prefix { position: absolute; left: 12px; color: var(--text-gray); font-size: 0.9rem; pointer-events: none; }
        .phone-input { padding-left: 45px !important; }

        .timer-text { font-size: 0.8rem; color: var(--text-gray); margin-top: 5px; text-align: center; }
        .resend-link { color: var(--primary); cursor: pointer; text-decoration: underline; display: none; }
    </style>
</head>
<body>

    <header>
        <div class="brand-container">
            <img src="79171.png" alt="Logo" class="logo-img">
            <div class="tagline-box">
                <h2>PharmaGuardian AI</h2>
                <p>Safer Medicines, Smarter Lives.</p>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>AI That Thinks Like a Pharmacist.</h1>
        </div>
    </section>

    <div id="authOverlay">
        
        <div class="auth-card" id="card-init">
            <h2 style="color: var(--primary);">Welcome</h2>
            <p style="margin-bottom: 20px;">Safer Medicines, Smarter Lives.</p>
            <div class="btn-row">
                <button class="btn-main" onclick="navTo('card-login')">Login</button>
                <button class="btn-main" onclick="navTo('card-signup')">Create New Account</button>
            </div>
        </div>

        <div class="auth-card hidden" id="card-login">
            <span class="back-btn" onclick="navTo('card-init')"><i class="fas fa-arrow-left"></i> Back</span>
            <h3 style="margin-top: 20px;">Login</h3>
            <div class="btn-row">
                <button onclick="toggleLogin('email')">Email</button>
                <button onclick="toggleLogin('mobile')">Mobile</button>
            </div>

            <div id="login-email" class="hidden">
                <input type="email" id="li-email" placeholder="Enter Email" oninput="valLogin()">
                <input type="password" id="li-epass" placeholder="Password" oninput="valLogin()">
            </div>

            <div id="login-mobile" class="hidden">
                <div class="phone-input-container">
                    <span class="prefix">+91</span>
                    <input type="text" id="li-mob" class="phone-input" placeholder="10 Digit Number" inputmode="numeric" oninput="valPhone(this, 'li-mob-err'); valLogin()">
                </div>
                <p id="li-mob-err" class="error-msg">Enter valid 10-digit number</p>
                <input type="password" id="li-mpass" placeholder="Password" oninput="valLogin()">
                <p style="font-size: 0.8rem; color: var(--primary); cursor: pointer; margin-top: 5px;" onclick="navTo('card-otp-login')">Login without password?</p>
            </div>
            <button id="btn-signin" class="btn-frozen" disabled style="width: 100%; margin-top: 15px;">Sign In</button>
        </div>

        <div class="auth-card hidden" id="card-otp-login">
            <span class="back-btn" onclick="navTo('card-login')"><i class="fas fa-arrow-left"></i> Back</span>
            <h3 style="margin-top: 20px;">OTP Login</h3>
            <div class="phone-input-container">
                <span class="prefix">+91</span>
                <input type="text" id="otp-mob" class="phone-input" placeholder="Mobile Number" inputmode="numeric" oninput="valPhone(this, 'otp-mob-err')">
            </div>
            <p id="otp-mob-err" class="error-msg">Enter valid 10-digit number</p>
            <button id="gen-otp-btn" class="btn-main" style="width: 100%; margin: 10px 0;" onclick="startOtpProcess()">Generate OTP</button>
            
            <div id="otp-entry" class="hidden">
                <input type="text" id="otp-val" placeholder="Enter 6-digit OTP" maxlength="6" oninput="valOtpInput()">
                <div class="timer-text" id="otp-timer-box">Resend OTP in: <span id="timer-sec">30</span>s</div>
                <div class="timer-text"><span id="resend-btn" class="resend-link" onclick="startOtpProcess()">Resend OTP Now</span></div>
                <button id="verify-login-btn" class="btn-frozen" disabled style="width: 100%; margin-top: 10px;" onclick="location.reload()">Verify & Login</button>
            </div>
        </div>

        <div class="auth-card hidden" id="card-signup">
            <span class="back-btn" onclick="navTo('card-init')"><i class="fas fa-arrow-left"></i> Back</span>
            <h3 style="margin-top: 20px;">Create Account</h3>
            
            <div style="display: flex; gap: 8px;">
                <input type="text" id="s-fn" placeholder="First Name" oninput="valSignup()">
                <input type="text" id="s-ln" placeholder="Last Name" oninput="valSignup()">
            </div>

            <select id="s-gen" onchange="valSignup()">
                <option value="">Select Gender</option>
                <option>Male</option><option>Female</option><option>Other</option>
            </select>

            <div class="phone-input-container">
                <span class="prefix">+91</span>
                <input type="text" id="s-mob" class="phone-input" placeholder="Mobile No." inputmode="numeric" oninput="valPhone(this, 's-mob-err'); valSignup()">
                <button id="s-vbtn" class="btn-main" style="flex:0; margin-left: 5px; font-size: 0.7rem; padding: 5px;" onclick="doVerify('mob')">Verify</button>
            </div>
            <p id="s-mob-err" class="error-msg">Invalid 10-digit number</p>
            <p id="s-mob-verified" class="verified-msg">Mobile Verified ✓</p>

            <div style="display: flex; gap: 5px; align-items: center;">
                <input type="email" id="s-email" placeholder="Enter Email ID" oninput="valEmail(); valSignup()">
                <button id="e-vbtn" class="btn-main" style="flex:0; font-size: 0.7rem; padding: 12px 10px; margin: 8px 0;" onclick="doVerify('email')">Verify Email</button>
            </div>
            <p id="s-email-err" class="error-msg">Enter valid email address</p>
            <p id="s-email-verified" class="verified-msg">Email Verified ✓</p>

            <div style="text-align: left; margin-top: 5px;">
                <label style="font-size: 0.8rem; color: var(--text-gray); margin-left: 5px;">Enter Date of Birth:</label>
                <input type="date" id="s-dob" oninput="valSignup()">
            </div>

            <input type="password" id="s-p1" placeholder="Password" oninput="valSignup()">
            <input type="password" id="s-p2" placeholder="Confirm Password" oninput="valSignup()">
            <p id="s-perr" class="error-msg">Passwords do not match!</p>
            
            <button id="btn-signup" class="btn-frozen" disabled style="width: 100%; margin-top: 10px;" onclick="location.reload()">Sign Up</button>
        </div>
    </div>

    <script>
        let currentLoginMode = '';
        let isPhoneVerified = false;
        let isEmailVerified = false;
        let timerInterval;

        function navTo(cardId) {
            document.querySelectorAll('.auth-card').forEach(c => c.classList.add('hidden'));
            document.getElementById(cardId).classList.remove('hidden');
            clearInterval(timerInterval);
        }

        function valPhone(el, errorId) {
            el.value = el.value.replace(/\D/g, ''); 
            if(el.value.length > 10) el.value = el.value.slice(0,10);
            const errEl = document.getElementById(errorId);
            errEl.style.display = (el.value.length > 0 && el.value.length < 10) ? 'block' : 'none';
        }

        function valEmail() {
            const emailInput = document.getElementById('s-email');
            const emailErr = document.getElementById('s-email-err');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const isValid = emailRegex.test(emailInput.value);
            emailErr.style.display = (emailInput.value.length > 0 && !isValid) ? 'block' : 'none';
            return isValid;
        }

        function toggleLogin(mode) {
            currentLoginMode = mode;
            document.getElementById('login-email').classList.toggle('hidden', mode !== 'email');
            document.getElementById('login-mobile').classList.toggle('hidden', mode !== 'mobile');
            valLogin();
        }

        function valLogin() {
            const btn = document.getElementById('btn-signin');
            let valid = false;
            if(currentLoginMode === 'email') {
                valid = document.getElementById('li-email').value && document.getElementById('li-epass').value;
            } else {
                valid = document.getElementById('li-mob').value.length === 10 && document.getElementById('li-mpass').value;
            }
            btn.disabled = !valid;
            btn.className = valid ? 'btn-main' : 'btn-frozen';
        }

        // OTP Timer Logic
        function startOtpProcess() {
            const mob = document.getElementById('otp-mob').value;
            if(mob.length === 10) {
                document.getElementById('otp-entry').classList.remove('hidden');
                document.getElementById('gen-otp-btn').classList.add('hidden');
                startTimer(30);
            }
        }

        function startTimer(seconds) {
            clearInterval(timerInterval);
            let timeLeft = seconds;
            const timerBox = document.getElementById('otp-timer-box');
            const resendLink = document.getElementById('resend-btn');
            const timerSec = document.getElementById('timer-sec');

            timerBox.style.display = 'block';
            resendLink.style.display = 'none';

            timerInterval = setInterval(() => {
                timeLeft--;
                timerSec.innerText = timeLeft;
                if(timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerBox.style.display = 'none';
                    resendLink.style.display = 'block';
                }
            }, 1000);
        }

        function valOtpInput() {
            const val = document.getElementById('otp-val').value;
            const btn = document.getElementById('verify-login-btn');
            if(val.length === 6) {
                btn.disabled = false;
                btn.className = 'btn-main';
            } else {
                btn.disabled = true;
                btn.className = 'btn-frozen';
            }
        }

        function doVerify(type) {
            if (type === 'mob') {
                const mob = document.getElementById('s-mob');
                if (mob.value.length === 10) {
                    mob.disabled = true;
                    document.getElementById('s-vbtn').classList.add('hidden');
                    document.getElementById('s-mob-verified').style.display = 'block';
                    isPhoneVerified = true;
                }
            } else if (type === 'email') {
                const mail = document.getElementById('s-email');
                if (valEmail() && mail.value !== "") {
                    mail.disabled = true;
                    document.getElementById('e-vbtn').classList.add('hidden');
                    document.getElementById('s-email-verified').style.display = 'block';
                    isEmailVerified = true;
                }
            }
            valSignup();
        }

        function valSignup() {
            const p1 = document.getElementById('s-p1').value;
            const p2 = document.getElementById('s-p2').value;
            document.getElementById('s-perr').style.display = (p1 && p2 && p1 !== p2) ? 'block' : 'none';
            const ids = ['s-fn', 's-ln', 's-gen', 's-mob', 's-email', 's-dob', 's-p1', 's-p2'];
            const allFilled = ids.every(id => document.getElementById(id).value !== "");
            const valid = allFilled && (p1 === p2) && isPhoneVerified && isEmailVerified;
            const btn = document.getElementById('btn-signup');
            btn.disabled = !valid;
            btn.className = valid ? 'btn-main' : 'btn-frozen';
        }
    </script>
</body>
</html>
